---
layout: post
title: model Deletion in ExtJS 5
date: '2015-01-01T09:13:00.000-08:00'
author: Balagangadhar Addanki
tags:
- extjs5
modified_time: '2015-01-01T09:20:30.054-08:00'
blogger_id: tag:blogger.com,1999:blog-2232263284250046405.post-2181386241501500309
blogger_orig_url: http://www.balasblog.com/2015/01/model-deletion-in-extjs-5.html
---

While I was working with ExtJS 5, I faced a problem in deleting a record. 'erase' is a method in ExtJS 5 to delete a model, which is a counter part of 'destroy' method in ExtJS 4. I tried 'erase' method on model to delete it using <i>rest</i> and it was not sending any DELETE request to the server. Here is the sample code snippet<br /><pre class="prettyprint prettyprinted" id="ext-gen1382" style="background-color: #f7f7f7; border-radius: 5px; border: 1px solid rgb(232, 232, 232); box-sizing: border-box; margin-bottom: 14px; margin-top: 10px; max-width: 900px; overflow-x: auto; overflow-y: hidden; padding: 10px 12px;"><span style="font-family: Menlo, Courier New, Courier, monospace;"><span style="line-height: 16.8999996185303px;">var user = Ext.create('User', {<br />   extend : 'Ext.data.Model',<br />   fields : ['id', 'name', 'email'],<br /><br />   proxy : {<br />    type : 'rest',<br />    url : '/users'<br />   }<br />  });<br /><br />user.set('id', '12345');<br />user.erase();</span></span></pre><br />In the preceding function call, will not be any XHR request with 'DELETE' method as we expect, if you are using ExtJS-5.1.0. In ExtJS 4, if there is any change in the ID property, it calls a function(changeId) that does house keeping of a model hence, model's phantom becomes false whereas in ExtJS5, <i>user.set('id','12345')</i> will not change <i>user</i>'s phantom to false(When we create model using Ext.create, default phantom value will be <i>true</i>). Since it is a phantom record(new record), it will not call any 'DELETE' request.<br /><br />Here is a simple hack to handle this problem. We hope there will be a fix in their future releases.<br /><br /><pre class="prettyprint prettyprinted" id="ext-gen1382" style="background-color: #f7f7f7; border-radius: 5px; border: 1px solid rgb(232, 232, 232); box-sizing: border-box; margin-bottom: 14px; margin-top: 10px; max-width: 900px; overflow-x: auto; overflow-y: hidden; padding: 10px 12px;"><span style="color: #660066; font-family: Menlo, Courier New, Courier, monospace;"><span style="line-height: 13px;">user.set('id','12345');<br /><b>user.commit();</b> // user.phantom becomes false<br />user.erase();</span></span></pre>or<br /><pre class="prettyprint prettyprinted" id="ext-gen1382" style="background-color: #f7f7f7; border-radius: 5px; border: 1px solid rgb(232, 232, 232); box-sizing: border-box; margin-bottom: 14px; margin-top: 10px; max-width: 900px; overflow-x: auto; overflow-y: hidden; padding: 10px 12px;"><span style="color: #660066; font-family: Menlo, Courier New, Courier, monospace;"><span style="line-height: 13px;">user.set('id','12345');<br /><b>user.phantom = false;</b> //Make phantom as false manually<br />user.erase();</span></span></pre><br />